[tool:pytest]
# Root-level pytest configuration for multi-service project
# Tests should be run per service to avoid conftest.py conflicts
# Use: pytest dashboard-service/tests/ or pytest database-service/tests/

# Test discovery patterns - only collect from current directory
# Explicitly ignore subdirectories to prevent conftest conflicts
norecursedirs = 
    .git
    .tox
    dist
    build
    *.egg
    __pycache__
    .pytest_cache
    htmlcov
    .coverage
    dashboard-service
    data-processing-service
    database-service
    chord-plot-service
    base
    shared-services
    docs
    Documentation
    requirements
    scripts
    source_docs
    ssl
    venv
    integration_tests

# Python files to collect - exclude root-level integration tests
python_files = test_*.py *_test.py

# Exclude root-level integration test files that cause conftest conflicts
collect_ignore_glob = 
    test_invite_functionality.py
    test_invite_management_complete.py
    test_invite_delete.py
    test_email.py
    test_validation.py

# Python classes to collect
python_classes = Test*

# Python functions to collect
python_functions = test_*

# Minimum version
minversion = 6.0

# Add options
addopts = 
    -v
    --tb=short
    --strict-markers
    --disable-warnings
    --color=yes

# Markers for different test types
markers =
    unit: Unit tests
    integration: Integration tests
    e2e: End-to-end tests
    slow: Slow running tests
    auth: Authentication tests
    api: API tests
    database: Database tests
    security: Security tests
    email: Email tests
    jwt: JWT tests
    password: Password tests
    admin: Admin tests
    rate_limit: Rate limiting tests
    functional: Functional tests
    config: Configuration tests
    frontend: Frontend tests
    launcher: Launcher tests

# Ignore patterns (moved to top section)

# Log configuration
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(name)s: %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Warnings configuration
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::UserWarning:flask_limiter
    ignore::LegacyAPIWarning:sqlalchemy
    ignore::DeprecationWarning:dateutil
    ignore::DeprecationWarning:dateutil.tz
